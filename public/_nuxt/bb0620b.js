(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{478:function(e,r,t){var content=t(547);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,t(16).default)("28b6ec5f",content,!0,{sourceMap:!1})},546:function(e,r,t){"use strict";t(478)},547:function(e,r,t){var o=t(15)(!1);o.push([e.i,".list-style-none{list-style:none;padding-left:0!important}",""]),e.exports=o},580:function(e,r,t){"use strict";t.r(r);var o=t(23),n=(t(29),t(79),{middleware:["auth","role"],data:function(){return{valid:!0,nameRules:[function(e){return!!e||"Нэрээ оруулна уу"}],emailRules:[function(e){return!!e||"Мэйл хаягаа оруулна уу"},function(e){return/.+@.+\..+/.test(e)||"Мэйл хаяг буруу байна"}],avatarRules:[function(e){return!e||e.size<524288||"Зураг 500 kb аас хэтэрсэн байна!"}],passwordRules:[],passwordConfirmRules:[],isBusy:!1,isLoading:!1,errorStatus:null,errors:null,form:{avatar:null,name:"",email:"",phone:"",password:"",password_confirmation:""},imageUrl:""}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.$route.params.id){r.next=16;break}return e.isBusy=!0,r.prev=2,r.next=5,e.$axios.get("/users/"+e.$route.params.id+"/edit");case 5:t=r.sent,e.isBusy=!1,t.data.success&&e.setFormData(t.data.user),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(2),e.isBusy=!1,console.log(r.t0);case 14:r.next=17;break;case 16:alert("Id not found!");case 17:case"end":return r.stop()}}),r,null,[[2,10]])})))()},setFormData:function(e){this.form.name=e.name,this.form.email=e.email,this.form.phone=e.phone,this.imageUrl=e.avatar},validate:function(){this.$refs.form.validate()&&this.submitForm()},submitForm:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.isLoading=!0,e.errors=null,r.prev=2,(t=new FormData).append("name",e.form.name),t.append("avatar",e.form.avatar),t.append("email",e.form.email),t.append("phone",e.form.phone),t.append("password",e.form.password),t.append("password_confirmation",e.form.password_confirmation),r.next=12,e.$axios.post("/users/"+e.$route.params.id+"/update",t);case 12:r.sent.data.success&&(e.$notify.showMessage({content:"Хэрэглэгч нэмэгдлээ",color:"primary"}),e.$router.push("/users")),r.next=22;break;case 16:r.prev=16,r.t0=r.catch(2),e.isLoading=!1,e.errorStatus=r.t0.response.status,422==r.t0.response.status?e.errors=r.t0.response.data:e.errors=r.t0.response.statusText,console.log(r.t0.response);case 22:case"end":return r.stop()}}),r,null,[[2,16]])})))()}}}),l=(t(546),t(51)),m=t(58),c=t.n(m),d=t(398),f=t(190),v=t(415),h=t(413),w=t(141),_=t(165),x=t(384),component=Object(l.a)(n,(function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"pa-4"},[e.isBusy?t("div",{staticClass:"text-center ma-3"},[t("v-progress-circular",{attrs:{indeterminate:"",color:"primary"}})],1):e._e(),e._v(" "),e.isBusy?e._e():t("div",[t("h3",[e._v("Хэрэглэгч үүсгэх")]),e._v(" "),e.errorStatus&&e.errors?t("v-alert",{attrs:{dense:"",outlined:"",type:"error"}},[422==e.errorStatus?t("ul",{staticClass:"list-style-none"},e._l(e.errors,(function(r,o){return t("li",{key:o},[t("ul",e._l(r,(function(r,i){return t("li",{key:i},[e._v("\n              "+e._s(r)+"\n            ")])})),0)])})),0):t("div",[e._v(" "+e._s(e.errors))])]):e._e(),e._v(" "),t("v-form",{ref:"form",staticClass:"mt-3 mb-3",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(r){e.valid=r},expression:"valid"}},[t("v-file-input",{attrs:{rules:e.avatarRules,accept:"image/png, image/jpeg, image/bmp",placeholder:"Зураг оруулна уу","prepend-icon":"mdi-camera",label:"Зураг"},model:{value:e.form.avatar,callback:function(r){e.$set(e.form,"avatar",r)},expression:"form.avatar"}}),e._v(" "),e.imageUrl?t("div",{staticClass:"mt-1 mb-4"},[t("v-img",{attrs:{"lazy-src":e.imageUrl,"max-width":"100",src:e.imageUrl}})],1):e._e(),e._v(" "),t("v-text-field",{attrs:{rules:e.nameRules,label:"Нэр",required:"","error-message":"error"},model:{value:e.form.name,callback:function(r){e.$set(e.form,"name",r)},expression:"form.name"}}),e._v(" "),t("v-text-field",{attrs:{rules:e.emailRules,label:"Мэйл хаяг",required:"","error-message":"error"},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}}),e._v(" "),t("v-text-field",{attrs:{label:"Утасны дугаар",required:"","error-message":"error"},model:{value:e.form.phone,callback:function(r){e.$set(e.form,"phone",r)},expression:"form.phone"}}),e._v(" "),t("v-text-field",{attrs:{label:"Нууц үг",required:"","error-message":"error",type:"password",rules:e.passwordRules},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}}),e._v(" "),t("v-text-field",{attrs:{label:"Нууц үг давт",required:"","error-message":"error",type:"password",rules:e.passwordConfirmRules},model:{value:e.form.password_confirmation,callback:function(r){e.$set(e.form,"password_confirmation",r)},expression:"form.password_confirmation"}}),e._v(" "),t("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid||e.isLoading,loading:e.isLoading,color:"success"},on:{click:e.validate}},[e._v("\n        Засах\n      ")])],1)],1)])}),[],!1,null,null,null);r.default=component.exports;c()(component,{VAlert:d.a,VBtn:f.a,VFileInput:v.a,VForm:h.a,VImg:w.a,VProgressCircular:_.a,VTextField:x.a})}}]);